<div class="flex flex-col gap-10">
  <div
    class="bg-gray-50 rounded-xl shadow p-6 border border-gray-100 flex flex-col items-center"
  >
    <h2 class="text-xl font-bold mb-4 color-green text-center">
      Distribuição do Tempo de Empresa
    </h2>
    <% if @eda[:tenure_distribution].present? %> 
    <%= bar_chart @eda[:tenure_distribution], height: '320px', library: {title: {text: '', fontSize: 0}} %> 
    <% else %>
    <div class="text-gray-400 text-lg mt-16 mb-16">Sem dados disponíveis</div>
    <% end %>
    <p class="text-sm text-gray-500 mt-4 text-center">
      Este gráfico mostra como o tempo de empresa está distribuído entre os colaboradores, ajudando a identificar grupos de recém-contratados e funcionários mais antigos.
    </p>
  </div>

  <% feedback_boxplot_data = eda[:feedback_boxplot] || [] %> 
  <% if feedback_boxplot_data.compact.present? %>
    <div class="bg-gray-50 rounded-xl shadow p-6 border border-gray-100 flex flex-col items-center">
      <h2 class="text-xl font-bold mb-4 color-green text-center">Boxplot de Feedback Geral</h2>
      <%= bar_chart({
        "Mínimo" => feedback_boxplot_data[0],
        "Q1" => feedback_boxplot_data[1],
        "Mediana" => feedback_boxplot_data[2],
        "Q3" => feedback_boxplot_data[3],
        "Máximo" => feedback_boxplot_data[4]
      }, height: '320px', library: {title: {text: '', fontSize: 0}}) %>
      <p class="text-sm text-gray-500 mt-4 text-center">
        O boxplot apresenta a dispersão dos feedbacks gerais, destacando valores mínimos, máximos, quartis e mediana, facilitando a análise de outliers e da distribuição dos feedbacks.
      </p>
    </div>
  <% else %>
    <div class="bg-gray-50 rounded-xl shadow p-6 border border-gray-100 flex flex-col items-center">
      <h2 class="text-xl font-bold mb-4 color-green text-center">Boxplot de Feedback Geral</h2>
      <div class="text-gray-400 text-lg mt-16 mb-16">Sem dados disponíveis</div>
      <p class="text-sm text-gray-500 mt-4 text-center">
        O boxplot apresenta a dispersão dos feedbacks gerais, destacando valores mínimos, máximos, quartis e mediana, facilitando a análise de outliers e da distribuição dos feedbacks.
      </p>
    </div>
  <% end %>

  <div
    class="bg-gray-50 rounded-xl shadow p-6 border border-gray-100 flex flex-col items-center"
  >
    <h2 class="text-xl font-bold mb-4 color-green text-center">
      Estatísticas Descritivas dos Feedbacks
    </h2>
    <% if eda[:summary_stats].present? %>
    <div class="flex flex-wrap gap-4 justify-center">
      <% eda[:summary_stats].each do |stat, value| %>
        <% next if stat == 'Média Feedback' || stat == 'Total Funcionários' %>
        <div
          class="bg-white border border-gray-200 rounded-xl shadow p-4 w-40 min-w-[140px] flex flex-col items-center"
        >
          <div class="text-xs text-gray-500 mb-1 text-center"><%= stat %></div>
          <div class="text-xl font-bold text-center"><%= value %></div>
        </div>
      <% end %>
    </div>
    <% else %>
    <div class="text-gray-400 text-lg mt-16 mb-16">Sem dados disponíveis</div>
    <% end %>
    <p class="text-sm text-gray-500 mt-4 text-center">
      Estes cards apresentam estatísticas complementares dos feedbacks, como mediana, mínimo e máximo, para uma análise mais detalhada da distribuição dos resultados.
    </p>
  </div>
</div>
